

### 事务

#### 事务的四个基本特征：
1. Atomic（原子性）：事务中包含的操作被看做一个逻辑单元，这个逻辑单元中的操作要么全部成功，要么全部失败。
2. Consistency（一致性）：事务完成时，数据必须处于一致状态，数据的完整性约束没有被破坏，事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没    有执行过一样。
3. Isolation（隔离性）：事务允许多个用户对同一个数据进行并发访问，而不破坏数据的正确性 和完整性。同时，并行事务的修改必须与其他并行事务的修改相互独立。
4. Durability（持久性）：事务结束后，事务处理的结果必须能够得到固化。


#### 隔离级别

数据库中的隔离等级有哪些？
基本问完你数据库事务有什么特性之后，接下来就是问隔离等级。隔离等级就是咱们上面说的隔离性的拓展。

在学习隔离等级之前，你需要先去了解什么是脏读、不可重复读、幻读。之后你就知道mysql的四个隔离等级分别起到什么作用，oracle的两个隔离等级起到什么做什么。

作为拓展，你可以记住mysql的默认隔离等级是什么，oracle的默认隔离等级是什么。我当时面试阿里的时候就连默认等级都给面试官背出来了。。。我估计面试官自己都没记住默认等级。


#### 什么是乐观锁，什么是悲观锁？

这个问题很常问，自己去查一下




### 三大范式+1

1. 1NF: 关系模式R的每个属性值都是`不可分解`的数据项
2. 2NF: 满足1NF，且不存在任何非主属性对候选关键字的`部分函数依赖`
3. 3NF：满足1NF，2NF，且不存在非主属性对候选关键字的`传递函数依赖`
4. BCNF: 满足1NF，且每个属性都不传递依赖于R的候选键




#### 数据库常用的操作

CID


这不算是一个问题，只算是给大家的一个提醒。如果你是现场面试的话，有时候是会被要求手写SQL的，所以你对于groupBy，orderBy，子查询之类的基础肯定是要会的。。。不然写一个简单的sql你都不会，估计直接就凉了。推荐你们看一下《MySQL必知必会》，我觉得这本书算是比较基础，比较容易上手。

#### 左连接右连接，全连接，外连接

什么是左连接，什么是右连接，什么是全连接，什么是内连接？
这个知识点太基础了，我就不说了，不会的自己去查。。。



#### 索引的作用和实现

数据库的索引有什么作用？用什么来实现的？
这个问题我觉得三次面试会被问到一次，基本上也是被问烂了。索引是用来加快查找速度的。目前在数据库中一般是使用B+树来实现索引的。

#### B树和B+ 树的实现

B树和B+树有什么区别？为什么索引不用B树
这个问题我是在阿里三面的时候被问的，而且感觉其他人也被问过这个问题。这个问题你需要去了解B+和B树具体结构上有什么区别，但是相对还是难一点的，如果觉得自己不想了解那么深入可以不去看。总体上来说，B+树在非叶子结点不保存数据，只在叶子结点保存。而B树在叶子结点和非叶子结点都会保存。这种结构导致你如果用B树来进行查询，会增加磁盘IO的次数，导致性能不如B+树。



#### SQL编译的过程大概是什么样的？（这一点可不看，算是偏门）

+ 存储过程是预编译的，所以存储过程的运行性能更高；
+ java用 prepareStatement，预编译防止SQL注入






### mysql的联合索引

+ where 对复合索引or，索引不起作用
+ 最左原则：key index(a,b,c)可以只用[a],或[a,b]
+ 经常查询，而不是经常CID操作
+ key基本不重复；
+ 数据条目比较大
+ 索引的列不应该为null
+ 字符串索引使用短索引
+ no in 进行全表扫描，no exists 可利用索引


- [ ] 后面有空直接看书补充





####  联合索引的顺序和写的sql语句的where顺序是否必须一致

---


### mysql引擎

+ innoDB:
	* 支持事务
	* 支持行级锁
	* 支持外键
	* 两次写：崩溃恢复
	* 支持场景：
		+ 必须事务
		+ 数据安全性要求高，崩溃恢复
		+ CID操作频繁

+ MyISAM
	* 快速并发读，速度贼快
	* 5.7左右的版本前是默认的引擎，最好的习惯还是每次建表都手动设置或查看一下默认设置
	* 适合场景
		+ 以查询为主，很少CID操作
		+ 没有事务
		+ 数据安全性要求不是很高
+ MEMORY


| Engine | Support | Comment | Transactions |XA|Savepoints |
|:--|:--:|:--|:--|:--|:--|
| InnoDB             | DEFAULT | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        |
| MRG_MYISAM         | YES     | Collection of identical MyISAM tables| NO      | NO   | NO         |
| MEMORY             | YES     | Hash based, stored in memory, useful for temporary tables      | NO           | NO   | NO         |
| BLACKHOLE          | YES     | /dev/null storage engine (anything you write to it disappears) | NO           | NO  | NO    |
| MyISAM             | YES     | MyISAM storage engine           | NO           | NO   | NO         |
| CSV                | YES     | CSV storage engine              | NO           | NO   | NO         |
| ARCHIVE            | YES     | Archive storage engine          | NO           | NO   | NO         |
|PERFORMANCE_SCHEMA| YES     | Performance Schema                | NO           | NO   | NO         |
| FEDERATED          | NO      | Federated MySQL storage engine  | NULL         | NULL | NULL       |
